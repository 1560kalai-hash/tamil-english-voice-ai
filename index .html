<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tamil â†’ English Voice AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:linear-gradient(135deg,#000428,#004e92);color:white}
header{background:#000;padding:15px;text-align:center;font-size:22px;font-weight:bold}
.menu{display:flex;gap:6px;justify-content:space-around;background:#111;padding:10px}
.menu button{flex:1;background:#00c6ff;border:none;padding:12px;border-radius:8px;font-size:15px;cursor:pointer}
.container{padding:15px}
.box{background:rgba(0,0,0,.6);padding:15px;border-radius:12px;margin-bottom:10px}
textarea{width:100%;height:90px;border-radius:8px;padding:10px;font-size:16px}
footer{text-align:center;padding:10px;font-size:12px;color:#ccc}
</style>
</head>

<body>

<header>ğŸ™ Tamil â†’ English Voice AI</header>

<div class="menu">
<button onclick="start()">ğŸ¤ Start</button>
<button onclick="stop()">ğŸ›‘ Stop</button>
<button onclick="speak()">ğŸ”Š Speak</button>
<button onclick="clearAll()">ğŸ—‘ Clear</button>
</div>

<div class="container">

<div class="box">
<h3>ğŸ¤ Tamil Speech</h3>
<textarea id="ta" placeholder="Press Start & Speak Tamil..."></textarea>
</div>

<div class="box">
<h3>ğŸŒ English Translation</h3>
<textarea id="en" placeholder="English will appear here..."></textarea>
</div>

</div>

<footer>Works Best in Chrome | Allow Microphone Permission</footer>

<script>
let rec;
let listening=false;

function init(){
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    if(!SR){ alert("Speech Recognition not supported"); return; }
    rec = new SR();
    rec.lang="ta-IN";
    rec.interimResults=false;
    rec.continuous=false;

    rec.onresult = e => {
        let text = e.results[0][0].transcript;
        document.getElementById("ta").value = text;
        translate(text);
    };

    rec.onerror = e => console.log(e);
}

function start(){
    if(!rec) init();
    rec.start();
}

function stop(){
    if(rec) rec.stop();
}

async function translate(text){
    let res = await fetch("https://api.mymemory.translated.net/get?q="+encodeURIComponent(text)+"&langpair=ta|en");
    let data = await res.json();
    document.getElementById("en").value = data.responseData.translatedText;
}

function speak(){
    let t = document.getElementById("en").value;
    if(!t) return;
    let u = new SpeechSynthesisUtterance(t);
    u.lang="en-US";
    speechSynthesis.speak(u);
}

function clearAll(){
    ta.value=""; en.value="";
}
</script>

</body>
</html>